#!/usr/bin/env osascript

on run argv
    set inputId to item 1 of argv

    -- Extract UUID if format is "w0t1p0:UUID"
    if inputId contains ":" then
        set AppleScript's text item delimiters to ":"
        set targetUUID to text item 2 of inputId
        set AppleScript's text item delimiters to ""
    else
        set targetUUID to inputId
    end if

    tell application "iTerm2"
        activate
        repeat with aWindow in windows
            repeat with aTab in tabs of aWindow
                repeat with aSession in sessions of aTab
                    if (id of aSession) is targetUUID then
                        select aWindow
                        select aTab
                        select aSession
                        return
                    end if
                end repeat
            end repeat
        end repeat
    end tell
end run
